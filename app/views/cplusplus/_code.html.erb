
<script type="text/javascript"><!--

$(function() {
  var textArea = $('textarea#code');

  cd.code = {
    reset: function() {
      var code =
        'const vector<string> tokens =' + "\n" +
        '{' + "\n" +
        '};';
      textArea.val(code);
    },
    add: function(token, comment) {
      var current = textArea.val();
      var token = escaped(token);
      code = current.substring(0, current.length - 2); // drop last };
      code += '    ' + token + ',' + spacer(token) + ' // ' + comment + "\n";
      code += '};';
      textArea.val(code);
    }
  };

  // - - - - - - - - - - - - - - - -

  function escaped(s) {
    var i, rep = '"';
    for (i = 0; i < s.length; i++) {
      var ch = s.charAt(i);
      if (ch == '"')
        rep += '\\"';
      else if (ch == '\\')
        rep += '\\\\';
      else
        rep += ch;
    }
    rep += '"';
    return rep;
  }

  function spacer(token) {
    var i, s = '';
    for (i = 0; i < (20-token.length); i++) {
      s += ' ';
    }
    return s;
  }

  cd.code.reset();

});

//--></script>

<textarea id="code"></textarea>
